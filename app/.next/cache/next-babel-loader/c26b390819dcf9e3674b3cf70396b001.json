{"ast":null,"code":"var __jsx = React.createElement;\n// From node_modules\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Head from \"next/head\";\nimport HorizontalScroll from \"react-scroll-horizontal\"; // From Components\n\nimport InputBar from \"../components/inputBar/inputBar.js\";\nimport AppListing from \"../components/appListing/appListing.js\";\nimport AppsRecommend from \"../components/appsRecommend/appsRecommend.js\"; // From css\n\nimport styles from \"../styles/Home.module.css\";\nexport default function Home() {\n  const {\n    0: hasError,\n    1: setHasError\n  } = useState(false);\n  const {\n    0: appsData,\n    1: setAppsData\n  } = useState({});\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: appsRecommend,\n    1: setAppsRecommend\n  } = useState({});\n  const {\n    0: isLoadingRecommend,\n    1: setIsLoadingRecommend\n  } = useState(false);\n  useEffect(() => {\n    const targetUrl = \"https://rss.itunes.apple.com/api/v1/hk/ios-apps/top-free/all/10/explicit.json \";\n    /*\n    Top 100:\n    const targetUrl = \"https://rss.itunes.apple.com/api/v1/hk/ios-apps/top-free/all/100/explicit.json\"\n    */\n\n    axios(targetUrl).then(res => setAppsData(res.data)).then(() => setIsLoading(true)).catch(err => setHasError(true));\n  }, []);\n  useEffect(() => {\n    const targetUrl = \"https://rss.itunes.apple.com/api/v1/hk/ios-apps/top-grossing/all/10/explicit.json\";\n    axios(targetUrl).then(res => setAppsRecommend(res.data)).then(() => setIsLoadingRecommend(true)).catch(err => setHasError(true));\n  }, []); // useEffect( () => {  \n  //    const sendGetRequest = async () => {\n  //       try {\n  //             const reviewUrl = \"https://itunes.apple.com/hk/lookup?id=1480196084\"\n  //             const resp = await axios.get(reviewUrl);\n  //             console.log(resp);\n  //             setAppsRating(resp.data);\n  //             console.log(appsRating);\n  //       } catch (err) {\n  //             // Handle Error Here\n  //             console.error(err);\n  //       }\n  //    };\n  //    sendGetRequest();\n  // }, [])\n\n  let appsArray = [];\n\n  if (isLoading) {\n    appsArray = [\"Top Apps\"];\n    let toggle = true;\n\n    for (var i = 0; i < 10; i++) {\n      appsArray.push(__jsx(AppListing, {\n        key: i,\n        appName: appsData.feed.results[i].name,\n        number: i + 1,\n        icon: appsData.feed.results[i].artworkUrl100,\n        genre: appsData.feed.results[i].genres[0].name,\n        toggle: toggle\n      }));\n      toggle = !toggle;\n    }\n  }\n\n  let recommendArray = [];\n\n  if (isLoadingRecommend) {\n    for (i = 0; i < 10; i++) {\n      recommendArray.push(__jsx(AppsRecommend, {\n        key: i,\n        appName: appsRecommend.feed.results[i].name,\n        number: i + 1,\n        icon: appsRecommend.feed.results[i].artworkUrl100,\n        genre: appsRecommend.feed.results[i].genres[0].name\n      }));\n    }\n  }\n\n  return __jsx(\"div\", {\n    className: styles.container\n  }, __jsx(Head, null, __jsx(\"title\", null, \"App Listing\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/favicon.ico\"\n  })), __jsx(\"main\", {\n    className: styles.main\n  }, __jsx(\"div\", null, __jsx(InputBar, {\n    className: styles.input\n  })), __jsx(\"div\", null, __jsx(\"p\", {\n    className: styles.title\n  }, \"\\u63A8\\u4ECB\"), __jsx(\"div\", {\n    className: styles.recommendBox\n  }, isLoadingRecommend ? console.log(appsRecommend) : __jsx(\"div\", null, \"Loading.\"), __jsx(HorizontalScroll, null, recommendArray))), __jsx(\"div\", null, hasError ? __jsx(\"div\", null, \"Error occured.\") : null, isLoading ? console.log(appsData) : __jsx(\"div\", null, \"Loading.\"), appsArray)));\n}","map":null,"metadata":{},"sourceType":"module"}